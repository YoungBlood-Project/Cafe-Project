package edu.sp5.jvx330.test;

import org.springframework.context.annotation.AnnotationConfigApplicationContext;

import edu.sp5.jvx330.cafe.config.MileageConfig;
import edu.sp5.jvx330.cafe.membership.business.CustomerService;
import edu.sp5.jvx330.cafe.membership.business.MileageService;
import edu.sp5.jvx330.cafe.membership.business.impl.CustomerServiceImpl;
import edu.sp5.jvx330.cafe.membership.business.impl.MileageServiceImpl;
import edu.sp5.jvx330.cafe.membership.domain.Customer;


public class MileageServiceTest {
	private static CustomerService customerService;
	private static MileageService mileageService;
	
	public static void main(String[] args) {
		AnnotationConfigApplicationContext context =
				new AnnotationConfigApplicationContext(MileageConfig.class);
		
		customerService = context.getBean("customerServiceImpl", CustomerServiceImpl.class);
		mileageService = context.getBean("mileageServiceImpl", MileageServiceImpl.class);

		// 1. Mileage 값 변경
		//  1-1. 마일리지 적립
		// addMileage();
		//  1-2. 마일리지 사용
		// subtractMileage();
		 
		// 2. Mileage 조회
		findMileage();
		 
		// 3. Mileage 삭제 
		// deleteMileage();

		context.close();
	}

	// 1. Mileage 값 변경
	//  1-1. 마일리지 적립
	public static void addMileage() {
		Customer customer = customerService.findCustomerByUserInfo("example_ex1", "example_ex1");
		mileageService.addMileage(customer, 500);
		System.out.println("마일리지 적립 완료");
	}
	
	//  1-2. 마일리지 사용
	public static void subtractMileage() {
		Customer customer = customerService.findCustomerByUserInfo("example_ex1", "example_ex1");
		mileageService.subtractMileage(customer, 200);
		System.out.println("마일리지 사용 완료");
	}
	// 2. Mileage 조회
	public static void findMileage() {
		System.out.println("------------ Mileage 조회------------");
		Customer customer = customerService.findCustomerByUserInfo("example_ex1", "example_ex1");
		System.out.println(customer);
		Integer mileage = mileageService.findMileage(customer);
		System.out.println(mileage);
	}
	
	// 3. Mileage 삭제
	public static void deleteMileage() {
		Customer customer = customerService.findCustomerByUserInfo("example_ex1", "example_ex1");
		mileageService.deleteMileage(customer);
		System.out.println("마일리지 삭제 완료");
	}
		
	
}
