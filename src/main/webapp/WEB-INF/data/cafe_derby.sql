CREATE TABLE Customer(
   cid      BIGINT		PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
   name   VARCHAR(30) 	NOT NULL,
   phone   VARCHAR(20)	NOT NULL
);
SELECT * FROM Customer;
DROP TABLE Customer;

CREATE TABLE Mileage(
	mileageId	BIGINT		PRIMARY	KEY	GENERATED ALWAYS AS IDENTITY,
	customerId	BIGINT		NOT	NULL,
	orderNum	BIGINT		NOT	NULL,
	mBalance	INT			NOT	NULL	DEFAULT	0,
	regDate		TIMESTAMP	NOT	NULL	DEFAULT	CURRENT_TIMESTAMP,
	CONSTRAINT	Mileage_customerId_FK	FOREIGN	KEY(customerId)	REFERENCES	Customer(cid)
);
SELECT * FROM Mileage;
DROP TABLE Mileage;

CREATE TABLE TotalMileage(
	tmId			BIGINT		PRIMARY	KEY	GENERATED	ALWAYS	AS	IDENTITY,
	customerId		BIGINT		NOT	NULL,
	mileageTotal	INT			NOT	NULL	DEFAULT	0,
	CONSTRAINT	TotalMileage_customerId_FK	FOREIGN	KEY(customerId)	REFERENCES	Customer(cid)
);
SELECT * FROM TotalMileage;
DROP TABLE TotalMileage;

CREATE TABLE Menu(
   mid      	BIGINT		PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
   menuName		VARCHAR(30) NOT NULL,
   menuPrice	INT			NOT NULL,
   category		VARCHAR(30)	NOT	NULL
);
SELECT * FROM Menu;
DROP TABLE Menu;
--DELETE FROM Menu WHERE mid = 3;

CREATE TABLE SalesHistory (
	sid			BIGINT		PRIMARY	KEY	GENERATED	ALWAYS	AS	IDENTITY,
	menuId		BIGINT		NOT NULL,
	orderNum	BIGINT		NOT	NULL,
	numOfSales	INT			NOT NULL	DEFAULT	0,
	paidPrice	INT			NOT	NULL	DEFAULT	0,
	orderDate	TIMESTAMP	NOT	NULL	DEFAULT	CURRENT_TIMESTAMP,
	CONSTRAINT SalesHistory_menuId_FK FOREIGN KEY(menuId) REFERENCES Menu(mid)
);

SELECT * FROM SalesHistory;
DROP TABLE SalesHistory;
--DELETE FROM SalesHistory WHERE menuId = 2;

ALTER TABLE SalesHistory DROP CONSTRAINT SalesHistory_menuId_FK;
ALTER TABLE SalesHistory ADD CONSTRAINT SalesHistory_menuId_FK FOREIGN KEY(menuId) REFERENCES Menu(mid);